import{j,u as C,k as T,r as n,c as a,o as l,a as e,l as V,w as M,d as w,e as b,v as x,t as v,i as N,H as y}from"./index-Ficy73Kv.js";const S={class:"h-full flex justify-between border-blue-500"},q={class:"w-full md:w-3/4 wrapper flex items-center justify-center border-red-500"},B={class:"w-full flex-2/3 wrapper flex items-center justify-center border-yellow-500"},D={class:"w-full max-w-md p-8 rounded-xl shadow-md border border-solid border-color-identity"},P={class:"relative"},H={class:"relative"},L={key:0,class:"flex items-center justify-center p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg",role:"alert"},O={class:"font-medium"},R={key:1,class:"flex items-center justify-center p-4 mb-4 text-sm text-green-700 bg-green-100 rounded-lg",role:"alert"},U={class:"font-medium"},E={class:"grid justify-items-center"},F={key:0,type:"button",class:"mb-2 w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",disabled:""},z={key:1,type:"submit",class:"mb-2 w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"},$={__name:"ResetPasswordForm",setup(I){const{backendUrlFC:h}=j(),f=C(),p=T(),i=n(""),d=n(""),u=n(!1),o=n(""),c=n(""),k=async()=>{if(u.value=!0,o.value="",c.value="",i.value!==d.value){o.value="Las contraseñas no coinciden",u.value=!1;return}try{const r=p.query.token,s=p.query.email;if(!r||!s)throw new y("Token o email no proporcionados",400);const t={token:r,email:s,password:i.value,password_confirmation:d.value};console.log("sendData",t);const m=await fetch(`${h}/api/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),g=await m.json();if(!m.ok)throw new y(g.message,m.status);c.value=g.message,setTimeout(()=>f.push({name:"login"}),2e3)}catch(r){o.value=r.message}finally{u.value=!1}},_=()=>{f.push({name:"login"})};return(r,s)=>(l(),a("main",null,[e("div",S,[s[9]||(s[9]=e("div",{class:"w-0 md:w-1/3 wrapper flex items-center justify-center border-orange-500"},null,-1)),e("div",q,[e("div",B,[e("div",D,[s[5]||(s[5]=e("img",{alt:"Vue logo",class:"w-full h-28",src:V},null,-1)),s[6]||(s[6]=e("br",null,null,-1)),s[7]||(s[7]=e("h2",{class:"text-2xl font-bold text-center text-identity"},"Nueva Contraseña",-1)),s[8]||(s[8]=e("h6",{class:"font-semi-bold text-center text-identity"},"Ingresa tu nueva contraseña",-1)),e("form",{onSubmit:M(k,["prevent"]),class:"mt-8 space-y-6"},[e("div",P,[s[2]||(s[2]=e("label",{for:"password",class:"block text-sm font-medium text-identity"},"Contraseña",-1)),b(e("input",{id:"password",name:"password","onUpdate:modelValue":s[0]||(s[0]=t=>i.value=t),type:"password",required:"",class:"text-gray-900 mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm"},null,512),[[x,i.value]])]),e("div",H,[s[3]||(s[3]=e("label",{for:"password_confirmation",class:"block text-sm font-medium text-identity"},"Confirmar Contraseña",-1)),b(e("input",{id:"password_confirmation",name:"password_confirmation","onUpdate:modelValue":s[1]||(s[1]=t=>d.value=t),type:"password",required:"",class:"text-gray-900 mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm"},null,512),[[x,d.value]])]),o.value?(l(),a("div",L,[e("span",O,v(o.value),1)])):w("",!0),c.value?(l(),a("div",R,[e("span",U,v(c.value),1)])):w("",!0),e("div",E,[u.value?(l(),a("button",F,s[4]||(s[4]=[e("svg",{class:"animate-spin h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1),N(" Procesando... ",-1)]))):(l(),a("button",z," Cambiar Contraseña "))])],32),e("div",{class:"flex justify-center text-sm"},[e("button",{onClick:_,class:"font-medium text-orange-600 hover:text-orange-500"}," Volver al inicio de sesión ")])])])])])]))}};export{$ as default};
