import{u as B,k as A,s as T,j as N,r as l,x as V,N as z,m as c,c as y,o as n,a as o,g as k,d as u,n as m,p as d,t as w,h as I,A as g}from"./index-Ficy73Kv.js";import R from"./BaseTable-yHBH8VeL.js";import $ from"./IconPlus-DMbSohNX.js";import D from"./Modal-Y96M_f6M.js";import{g as E,_ as L,s as P,e as W}from"./BaseForm-Dcd7kL4r.js";import F from"./IconWorkOrder-CLaPFiR7.js";import"./business-BrTkWtTt.js";import"./ViewDetails-BvOTNm1I.js";import"./featureFlags-_CcJ_rqO.js";import"./IconX-CIzaZ8qm.js";/* empty css                                              */import"./CurrencyInput-qrvO-2Ib.js";const q={class:"flex flex-col items-center justify-center mb-10"},G={class:"text-1xl font-bold text-orange-800"},H={class:"text-1xl font-bold text-orange-800"},J={class:"flex justify-between"},K=["disabled"],de={__name:"ListadoOrdenes",setup(Q){const _=B(),h=A(),{isMobile:C}=T(N()),i=l(!1),p=l("add_order"),M=()=>{var e;P({actionSelected:"view_structures",rowSelected:(e=r.value)==null?void 0:e.proyecto}),_.go(-1)},x={id:h.params.estructura_id,object:"estructura"},a=l(null),r=l({});V(()=>{a.value=x,E()}),z(()=>W.data,e=>{e&&e.actionSelected==="view_orders"&&(r.value=e.rowSelected)},{immediate:!1});const O=()=>{i.value=!0},v=c(()=>{var e;return((e=r.value.estado)==null?void 0:e.estado)!=="ACTIVA"}),S=c(()=>{var e,t,s,f;return((t=(e=r.value)==null?void 0:e.proyecto)==null?void 0:t.codigo)+" - "+((f=(s=r.value)==null?void 0:s.proyecto)==null?void 0:f.nombre_proyecto)}),j=c(()=>{var e,t,s;return((e=r.value)==null?void 0:e.codigo_estructura)+" - "+((t=r.value)==null?void 0:t.tipo_estructura)+" - "+((s=r.value)==null?void 0:s.tipo_cimentacion)}),b=()=>{i.value=!1,a.value=null,setTimeout(()=>{a.value=x},500)};return(e,t)=>(n(),y("main",null,[o("div",q,[t[1]||(t[1]=o("h1",{class:"text-2xl text-identity-dark dark:text-gray-300"},"Ordenes de Trabajo",-1)),o("div",{class:d(["flex flex-row items-center px-3 py-1 rounded-lg my-1",["bg-orange-100 border border-orange-600"]])},[o("h1",G,w(S.value),1)]),o("div",{class:d(["flex flex-row items-center px-3 py-1 rounded-lg my-1",["bg-orange-100 border border-orange-600"]])},[o("h1",H,w(j.value),1)])]),o("div",J,[o("button",{onClick:M,class:d(["bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800 mb-2","flex items-center px-4 py-2 text-sm text-identity capitalize transition-colors duration-200 border rounded-md gap-x-2 dark:text-gray-200 dark:border-gray-200"])},t[2]||(t[2]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 rtl:-scale-x-100"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),o("span",null," AtrÃ¡s ",-1)])),r.value?(n(),y("button",{key:0,onClick:t[0]||(t[0]=s=>O()),class:d(["flex items-center px-4 py-2 text-sm text-identity capitalize transition-colors duration-200 border rounded-md gap-x-2 dark:text-gray-200 dark:border-gray-200",[v.value?"bg-gray-400":"bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800","mb-2"]]),disabled:v.value},[t[3]||(t[3]=o("span",null," Nueva Orden ",-1)),m($,{class:"w-5 h-5"})],10,K)):u("",!0)]),a.value?(n(),k(R,{key:0,table:"ordenTrabajos","icons-view":I(C)?[]:["IconWorkOrder"],"row-selected":a.value},null,8,["icons-view","row-selected"])):u("",!0),m(D,{"is-modal-open":i.value,onCloseModal:b,"max-height":"max-entity-height","max-width":"max-w-5xl"},{icon:g(()=>[m(F,{class:"w-6 h-6 text-gray-800 dark:text-white"})]),title:g(()=>t[4]||(t[4]=[o("h3",{class:"text-lg font-medium leading-6 text-gray-800 capitalize dark:text-white",id:"modal-title"}," Agregar Orden ",-1)])),content:g(()=>[p.value==="add_order"?(n(),k(L,{key:0,"type-form":"ordenTrabajo","action-selected":p.value,"row-selected":a.value,onCloseModal:b},null,8,["action-selected","row-selected"])):u("",!0)]),_:1},8,["is-modal-open"])]))}};export{de as default};
