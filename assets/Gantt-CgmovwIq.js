import{_ as ft,K as yt,r as B,q as gt,x as ht,a6 as vt,m as j,N as mt,O as pe,c as y,o as c,g as V,d as le,a as l,p as k,z as Q,h as M,t as h,F as N,y as q,e as kt,Q as bt,$ as Z,i as L,n as ie,A as G,S as _,U as T,a7 as S}from"./index-Ficy73Kv.js";import{u as pt,A as Dt}from"./business-BrTkWtTt.js";/* empty css                                              *//* empty css                                                              */const wt={class:"relative py-4"},_t={class:"w-full max-w-7xl mx-auto px-6 lg:px-8"},xt={class:"flex justify-center items-center my-4 gap-2"},Ct={class:"flex justify-between items-center my-4"},Bt={class:"text-base font-semibold text-gray-900 dark:text-gray-200"},Tt={class:"flex gap-2"},St=["onClick"],Et={class:"gantt-wrapper relative rounded-lg shadow-md bg-white dark:bg-gray-800"},It={class:"gantt-overlay absolute inset-0 flex items-center justify-center"},At={class:"rounded-lg shadow-md bg-white dark:bg-gray-800 sticky-container"},Mt={id:"gantt-table",class:"min-w-full divide-y divide-gray-700 dark:divide-gray-200"},Nt={class:"bg-identity-dark dark:bg-gray-900 bg-inherit sticky-row"},$t=["id"],Ot=["onClick"],jt={key:2,class:"flex flex-row justify-center"},Lt={title:"Actividades Antecesoras",class:k(["m-1 p-1 rounded-md shadow-xl","bg-amber-100 border border-amber-600","custom-shadow"])},Rt={key:0,class:"p-2 basis-full text-sm font-normal text-center rtl:text-right text-identity dark:text-gray-300 gap-4"},Vt={class:"inline-flex items-center px-3 py-1 rounded-full gap-x-2 bg-green-100 border border-green-600"},Wt={class:"text-sm font-semibold text-green-800"},Ht={key:1,class:"p-2 bg-white dark:bg-gray-800"},Pt={key:3,class:"flex flex-row justify-center"},Ft=["onClick"],qt={key:4,class:"bg-white rounded-xl shadow-sm overflow-hidden p-1"},Gt={class:"relative h-6 flex items-center justify-center"},Ut={class:"flex justify-center"},Yt={class:"p-4 bg-identity-2 dark:bg-gray-800"},zt={key:0,class:"my-1 p-1 border-color-identity-dark dark:border-gray-200"},Xt={key:0,class:"text-identity-dark font-semibold dark:text-gray-300"},Jt={class:"flex flex-row justify-center items-center"},Qt={class:"flex justify-end mr-2"},Kt=["onClick"],Zt={class:"flex flex-row justify-center items-center"},ea={class:"flex justify-start ml-2"},ta=["onClick"],aa={key:1,class:"text-identity-dark font-semibold dark:text-gray-300"},sa={class:"flex flex-col justify-center items-center"},oa={class:"ml-2"},ra={title:"Fechas No Disponibles",class:k(["m-1 p-1 rounded-md shadow-xl","bg-cyan-100 border border-cyan-600","custom-shadow"])},na={key:2,class:"text-identity-dark font-semibold dark:text-gray-300"},la={key:3,class:"text-identity-dark font-semibold dark:text-gray-300"},ia={class:"bg-white rounded-xl shadow-sm overflow-hidden p-1"},da={class:"relative h-6 flex items-center justify-center"},ca={key:4,class:"text-identity-dark font-semibold dark:text-gray-300"},ua={class:"flex justify-between"},fa=["onClick"],ya=["onClick"],ga=["onClick"],U=6,Y=0,ha={__name:"Gantt",props:{columns:{type:Array,default:()=>[{key:"id",label:"ID"},{key:"task",label:"Tarea"},{key:"duration",label:"Duración"},{key:"progress",label:"Progreso"},{key:"actividades_antecesoras_ids",label:"Actividades Antecesoras"},{key:"go",label:"Ir"}]},tasks:{type:Array,required:!0,default:()=>[]},stickyColumns:{type:Number,default:6},responsablesOnOrder:{type:Array,default:()=>[]},etapasOnOrder:{type:Array,default:()=>[]},showGeneralInfoSuggestedPlanning:{type:Boolean,default:!0}},emits:["applyChanges","adjustTasks","openModal","closeModal"],setup(De,{emit:we}){const{formatStoreMonthYear:va,formatStoreDate:f,parseStoreDate:d,compareDatesIsSame:W,compareDatesGreater:R,compareDatesLess:H,compareRangeDates:de,getDaysBetweenDates:O,formatPrettyDate:ee,formatPrettyDateDayMonth:ma,formatPrettyBusinessDateDayMonth:_e,getTime:ka,getMonthYear:K,isMonthBetweenMonths:xe,getMonth:ba,reduceDaysToDate:E,addDaysToDate:I}=yt(),{formatHours:Ce,formatIntHours:Be,getHorasEstimadasPorEtapa:pa,parseStringToIntHours:Da,getLaboralHoursPerDay:Te}=pt(),Se=B(["IconPlus","IconCalendar","IconHistory","IconArrowDown","IconArrowUp","IconSave","IconGo"]),{iconsForm:z,loadFormIcons:Ee}=gt(),Ie=B(!1);ht(async()=>{fe(),await Ee(Se.value),be.value=await Te(),Ve()}),vt(async()=>{await Ae()});const ce=we,ue=B([]),fe=()=>{for(let e=0;e<r.stickyColumns;e++){const t=document.getElementById(`head-column-${e}`);ue.value[e]=t==null?void 0:t.offsetWidth}},ye=e=>ue.value.slice(0,e).reduce((t,s)=>t+s,0),Ae=async()=>{for(const e of r.tasks)for(const t of e.responsables){const s=r.responsablesOnOrder.findIndex(a=>a.id===t.id);if(s!==-1){const a=r.responsablesOnOrder[s];t.fechas_no_disponibles=a.fechas_no_disponibles}}},r=De,u=B(null),Me=e=>{u.value={...e},u.value.start=d(u.value.start),u.value.end=d(u.value.end),v.value=0,x.value=0,p.value=0,b.value=0},p=B(0),b=B(0),v=B(0),x=B(0),Ne=e=>{u.value[e]=E(u.value[e],1),u.value[e]=d(u.value[e]),e==="start"?p.value>0?p.value--:v.value++:b.value>0?b.value--:x.value++},$e=e=>{u.value[e]=I(u.value[e],1),u.value[e]=d(u.value[e]),e==="start"?v.value>0?v.value--:p.value++:x.value>0?x.value--:b.value++},Oe=e=>{if(!e)return!1;if(e.getDay()===6||e.getDay()===0)return!0},je=(e,t,s)=>({border:e===t&&e===s,"border-l":e===t&&e!==s,"border-r":e===s&&e!==t}),ge=e=>({"bg-green-200":e<105,"bg-orange-200":e>105&&e<120,"bg-red-200":e>120}),he=e=>({"text-green-800":e<105,"text-orange-800":e>105&&e<120,"text-red-800":e>120}),Le=(e,t)=>{ce("openModal",{start:e,index:t})},ve=e=>{const t=r.tasks[0].start,s=r.tasks[r.tasks.length-1].end,a=d(e);if(isNaN(a.getTime())||a.getDay()===U||a.getDay()===Y||a<d(t)||a>d(s))return!1;for(const o of r.tasks)if(de(e,o.start,o.end))return!1;return!0},$=B("semester"),Re=[{label:"Semana",value:"week"},{label:"Mes",value:"month"},{label:"Tres Meses",value:"three-months"},{label:"Semestre",value:"semester"}],C=B(null),Ve=()=>{r.tasks.length>0?C.value=d(r.tasks[0].start):C.value=new Date,console.log("initDate",C.value)},me=j(()=>{if(!C.value)return[];const e=new Date(C.value);return e.setDate(e.getDate()-e.getDay()+1),Array.from({length:5},(t,s)=>{const a=new Date(e);return a.setDate(a.getDate()+s),a})}),We=j(()=>{if(!C.value)return[];const e=new Date(C.value);return Array.from({length:31},(t,s)=>{const a=new Date(e);return a.setDate(a.getDate()+s),a})}),He=j(()=>{if(!C.value)return[];const e=new Date(C.value);return Array.from({length:90},(t,s)=>{const a=new Date(e);return a.setDate(a.getDate()+s),a})}),Pe=j(()=>C.value?Array.from({length:180},(e,t)=>{const s=new Date(C.value);return s.setDate(s.getDate()+t),s}):[]),Fe=j(()=>{if(!C.value)return[];const e=new Date(C.value);return e.setMonth(0),Array.from({length:12},(t,s)=>{const a=new Date(e);return a.setMonth(s),a})}),te=j(()=>{switch($.value){case"week":return me.value;case"month":return We.value;case"three-months":return He.value;case"semester":return Pe.value;case"year":return Fe.value;default:return me.value}});mt(te,()=>{T(()=>{fe()})},{immediate:!0});const X=()=>[...r.columns,...te.value.map(e=>({key:f(e),label:$.value!=="year"?ee(e):K(e)}))],qe=j(()=>X().map((e,t)=>{const s=d(e.key),a=t<r.stickyColumns,o=[0,6].includes(s.getDay());return{isStickyColumn:a,isWeekend:o}})),Ge=(e,t)=>{const{isStickyColumn:s=!1,isWeekend:a=!1}=qe.value[e]||{},o=t.area_responsable;return{"sticky-column px-2":s,"bg-orange-200":o==="INGENIERIA"&&s,"bg-gray-200":o==="DIBUJO"&&s,"bg-indigo-200":o==="OTRO"&&s,"bg-yellow-200":a}},Ue=(e,t,s)=>{if(e===null||t===null)return!1;const a=K(e),o=K(t),n=K(s);return a===n||o===n||xe(n,a,o)},ke=(e,t)=>({"rounded-lg":e.start===e.end,"rounded-l-lg":t.key===e.start&&e.start!==e.end,"rounded-r-lg":t.key===e.end&&e.start!==e.end}),Ye=(e,t)=>{const s=t.key;return d(s),{"bg-orange-500":e.area_responsable==="INGENIERIA"&&$.value!=="year","bg-gray-500":e.area_responsable==="DIBUJO"&&$.value!=="year","bg-cyan-500":e.area_responsable==="OTRO"&&$.value!=="year","bg-red-500":!1}},ze=(e,t)=>{const s=d(t.key);return e.some(o=>W(d(o),s)&&s.getDay()!==U&&s.getDay()!==Y)},Xe=(e,t)=>({"bg-red-200":ze(e.no_working_days,t)}),Je=(e,t)=>{const s=d(t);return e.some(o=>W(d(o),s)&&s.getDay()!==U&&s.getDay()!==Y)},Qe=(e,t)=>({"bg-cyan-200":Je(e.no_available_days,t)}),Ke=j(()=>{switch($.value){case"week":return"Vista Semanal";case"month":return"Vista Mensual";case"three-months":return"Vista Trimestral";case"semester":return"Vista Semestral";case"year":return"Vista Anual"}}),ae=B(!1),Ze=e=>{ae.value=!0,$.value=e,T(()=>{setTimeout(()=>{ae.value=!1},500)})},et=B({id:{label:"ID",show:!0},task:{label:"Tarea",show:!0},start:{label:"Inicio",show:!0},end:{label:"Fin",show:!0},duration:{label:"Duración",show:!0},progress:{label:"Progreso",show:!0},area_responsable:{label:"Área Responsable",show:!0},responsables:{label:"Responsables",show:!0},type:{label:"Tipo",show:!0},orden_id:{label:"Orden ID",show:!0},belongs_to_etapa:{label:"Etapa ID",show:!0},actividades_antecesoras_ids:{label:"Actividades Antecesoras",show:!0}}),P=e=>et.value[e]??{label:"",show:!1},tt=e=>{S(),_.fire({title:"¿Estás seguro de mover esta tarea hacia la izquierda?",showDenyButton:!0,confirmButtonText:"Sí, mover",confirmButtonColor:"#EC7522",denyButtonText:"No, cancelar",denyButtonColor:"#B2B2B2"}).then(t=>{if(t.isConfirmed){if(e===0)return;const s=r.tasks[e];r.tasks[e]=r.tasks[e-1],r.tasks[e-1]=s,["start","end"].forEach(o=>{const n=r.tasks[e][o];r.tasks[e][o]=r.tasks[e-1][o],r.tasks[e-1][o]=n})}})},at=e=>{S(),_.fire({title:"¿Estás seguro de mover esta tarea hacia la derecha?",showDenyButton:!0,confirmButtonText:"Sí, mover",confirmButtonColor:"#EC7522",denyButtonText:"No, cancelar",denyButtonColor:"#B2B2B2"}).then(t=>{if(t.isConfirmed){if(e===r.tasks.length-1)return;const s=r.tasks[e];r.tasks[e]=r.tasks[e+1],r.tasks[e+1]=s,["start","end"].forEach(o=>{const n=r.tasks[e][o];r.tasks[e][o]=r.tasks[e+1][o],r.tasks[e+1][o]=n})}})},st=e=>{if(nt())return S(),_.fire({icon:"error",title:"Error",text:"La fecha de fin no puede ser menor a la fecha de inicio"});const t=d(r.tasks[e].start),s=d(r.tasks[e].end),a=d(u.value.start),o=d(u.value.end);if(a.getDay()===U||a.getDay()===Y||o.getDay()===U||o.getDay()===Y)return S(),_.fire({icon:"error",title:"Error",text:"No se pueden seleccionar fechas en sábado o domingo"});H(a,t)&&W(o,s)?(console.log("solo se modifico la fecha de inicio hacia atras ",v.value+" días"),S(),_.fire({title:"¿Cómo desea mover esta tarea hacia atrás "+v.value+" días?",showDenyButton:!0,confirmButtonText:`Mover las tareas en bloque hacia atrás ${v.value} días`,confirmButtonColor:"#EC7522",denyButtonText:`No, sólo la fecha hacia atrás ${v.value} días`,denyButtonColor:"#B2B2B2"}).then(async n=>{n.isConfirmed?(oe(e,v.value,0),T(()=>{ne(e)})):n.isDenied&&(r.tasks[e].start=f(u.value.start)),A(),T(()=>{J(e),A()})})):W(a,t)&&R(o,s)?(console.log("solo se modifico la fecha de fin hacia adelante ",b.value+" días"),S(),_.fire({title:"¿Cómo desea mover esta tarea hacia adelante "+b.value+" días?",showDenyButton:!0,confirmButtonText:`Mover las tareas en bloque hacia adelante ${b.value} días`,confirmButtonColor:"#EC7522",denyButtonText:`No, sólo la fecha hacia adelante ${b.value} días`,denyButtonColor:"#B2B2B2"}).then(async n=>{n.isConfirmed?(se(e,0,b.value),T(()=>{re(e)})):n.isDenied&&(r.tasks[e].end=f(u.value.end)),A(),T(()=>{J(e),A()})})):W(a,t)&&H(o,s)?(console.log("solo se modifico la fecha de fin hacia atras ",x.value+" días"),S(),_.fire({title:"¿Cómo desea mover esta tarea hacia atrás "+x.value+" días?",showDenyButton:!1,confirmButtonText:`Mover la fecha de fin hacia atrás ${x.value} días`,confirmButtonColor:"#EC7522"}).then(n=>{n.isConfirmed&&(r.tasks[e].end=f(u.value.end))})):R(a,t)&&W(o,s)?(console.log("solo se modificó la fecha de inicio hacia adelante ",p.value+" días"),S(),_.fire({title:"¿Cómo desea mover esta tarea hacia adelante "+p.value+" días?",showDenyButton:!1,confirmButtonText:`Mover la fecha de inicio hacia adelante ${p.value} días`,confirmButtonColor:"#EC7522"}).then(n=>{n.isConfirmed&&(r.tasks[e].start=f(u.value.start))})):H(a,t)&&H(o,s)?(console.log("se modifico la fecha de inicio hacia atras "+v.value+" días y la fecha de fin hacia atras ",x.value+" días"),S(),_.fire({title:"¿Cómo desea mover esta tarea hacia atrás "+v.value+" días?",showDenyButton:!0,confirmButtonText:`Mover las tareas en bloque hacia atrás ${v.value} días`,confirmButtonColor:"#EC7522",denyButtonText:`No, sólo la fecha hacia atrás ${v.value} días`,denyButtonColor:"#B2B2B2"}).then(async n=>{n.isConfirmed?(oe(e,v.value,x.value),T(()=>{ne(e)})):n.isDenied&&(r.tasks[e].start=f(u.value.start),r.tasks[e].end=f(u.value.end)),A(),T(()=>{J(e),A()})})):R(a,t)&&R(o,s)?(console.log("se modifico la fecha de inicio hacia adelante "+p.value+" días y la fecha de fin hacia adelante ",b.value+" días"),S(),_.fire({title:"¿Cómo desea mover esta tarea hacia adelante "+p.value+" días?",showDenyButton:!0,confirmButtonText:`Mover las tareas en bloque hacia adelante ${p.value} días`,confirmButtonColor:"#EC7522",denyButtonText:`No, sólo la fecha hacia adelante ${p.value} días`,denyButtonColor:"#B2B2B2"}).then(async n=>{n.isConfirmed?(se(e,p.value,b.value),T(()=>{re(e)})):n.isDenied&&(r.tasks[e].start=f(u.value.start),r.tasks[e].end=f(u.value.end)),A(),T(()=>{J(e),A()})})):H(a,t)&&R(o,s)?(console.log("se modifico la fecha de inicio hacia atrás "+v.value+" días y la fecha de fin hacia adelante ",b.value+" días"),S(),_.fire({title:"¿Cómo desea mover esta tarea hacia atrás "+v.value+" días y adelante "+b.value+" días?",showDenyButton:!0,confirmButtonText:`Mover las tareas en bloque hacia atrás ${v.value} días y adelante ${b.value} días`,confirmButtonColor:"#EC7522",denyButtonText:`No, sólo la fecha hacia atrás ${v.value} días y adelante ${b.value} días`,denyButtonColor:"#B2B2B2"}).then(async n=>{n.isConfirmed?(oe(e,v.value,0),se(e,0,b.value),T(()=>{ne(e),re(e)})):n.isDenied&&(r.tasks[e].start=f(u.value.start),r.tasks[e].end=f(u.value.end)),A(),T(()=>{J(e),A()})})):R(a,t)&&H(o,s)?(console.log("se modificó la fecha de inicio hacia adelante "+p.value+" días y la fecha de fin hacia atrás ",x.value+" días"),S(),_.fire({title:"¿Cómo desea mover esta tarea hacia adelante "+p.value+" días y hacia atrás "+x.value+" días?",showDenyButton:!1,confirmButtonText:`Mover la fecha de inicio hacia adelante ${p.value} días y la fecha de fin hacia atrás ${x.value} días`,confirmButtonColor:"#EC7522"}).then(n=>{n.isConfirmed&&(r.tasks[e].start=f(u.value.start),r.tasks[e].end=f(u.value.end))})):console.log("no se modifico ninguna fecha")},se=(e,t,s)=>{const a=r.tasks[e],o=d(a.start),n=d(a.end);a.start=f(I(o,t)),a.end=f(I(n,s));const i=d(a.end),w=O(n,i);ot(e,w)},ot=(e,t)=>{const s=r.tasks[e];let a=d(s.end);for(let o=e+1;o<r.tasks.length;o++){const n=r.tasks[o],i=d(n.start),w=d(n.end),m=O(i,w),g=O(a,i),D=I(a,g+t),F=I(D,m);n.start=f(D),n.end=f(F),a=F}},oe=(e,t,s)=>{const a=r.tasks[e],o=d(a.start),n=d(a.end);a.start=f(E(o,t)),a.end=f(E(n,s));const i=d(a.start),w=O(i,o);rt(e,w)},rt=(e,t)=>{let s=d(r.tasks[e].start);for(let a=e-1;a>=0;a--){const o=r.tasks[a],n=d(o.start),i=d(o.end),w=O(n,i),m=O(i,s),g=E(s,m+t),D=E(g,w);o.start=f(D),o.end=f(g),s=D}},re=e=>{for(let t=e;t<r.tasks.length-1;t++){const s=r.tasks[t],a=r.tasks[t+1],o=d(s.end),n=d(a.start),i=O(o,n)-1;i>0&&(a.start=f(E(d(a.start),i)),a.end=f(E(d(a.end),i)))}},ne=e=>{for(let t=e;t>0;t--){const s=r.tasks[t],a=r.tasks[t-1],o=d(s.start),n=d(a.end),i=O(n,o)-1;i>0&&(a.end=f(I(d(a.end),i)),a.start=f(I(d(a.start),i)))}},A=()=>{for(let e=0;e<r.tasks.length;e++){const t=r.tasks[e];let s=d(t.start),a=d(t.end);if(v.value>0){for(;s.getDay()===6||s.getDay()===0;)s=E(s,1);for(;a.getDay()===6||a.getDay()===0;)a=E(a,1)}else if(p.value>0){for(;s.getDay()===6||s.getDay()===0;)s=I(s,1);for(;a.getDay()===6||a.getDay()===0;)a=I(a,1)}if(x.value>0){for(;a.getDay()===6||a.getDay()===0;)a=E(a,1);for(;s.getDay()===6||s.getDay()===0;)s=E(s,1)}else if(b.value>0){for(;a.getDay()===6||a.getDay()===0;)a=I(a,1);for(;s.getDay()===6||s.getDay()===0;)s=I(s,1)}t.start=f(s),t.end=f(a)}},be=B(null),J=e=>{let t=0;const s=d(r.tasks[e].start),a=d(r.tasks[e].end);for(;s<=a;){if(s.getDay()!==U&&s.getDay()!==Y){const o=be.value[s.getDay()]||0;t+=o}else console.log("Fecha",s),console.log("Total Duration",t);s.setDate(s.getDate()+1)}r.tasks[e].duration=Be(t)},nt=()=>!!R(u.value.start,u.value.end),lt=()=>{const e=r.tasks[0],t=f(e.start),s=X().findIndex(o=>o.key===t),a=document.getElementById(`head-column-${s}`);if(!a)return _.fire({icon:"error",title:"Error",text:"No se encontró la fecha de inicio de la primera tarea"});a.scrollIntoView({behavior:"smooth",block:"center",inline:"end"})},it=e=>{const t=r.tasks[e],s=f(t.start),a=X().findIndex(ut=>ut.key===s),o=document.getElementById(`head-column-${a}`);if(!o)return _.fire({icon:"error",title:"Error",text:"No se encontró la fecha de inicio de la tarea"});const n=document.querySelector(".sticky-container");if(!n)return;const i=n.getBoundingClientRect(),w=o.getBoundingClientRect(),m=n.scrollLeft,D=w.left-i.left+m+w.width/2-n.clientWidth/2,F=-n.clientWidth*.05,ct=Math.min(Math.max(D+F,0),n.scrollWidth-n.clientWidth);n.scrollTo({left:ct,behavior:"smooth"})},dt=()=>{ce("applyChanges",r.tasks)};return(e,t)=>{const s=pe("VDropdown"),a=pe("VueDatePicker");return c(),y(N,null,[Ie.value?(c(),V(Dt,{key:0})):le("",!0),l("section",wt,[l("div",_t,[l("div",xt,[l("div",null,[l("button",{onClick:t[0]||(t[0]=o=>lt()),class:k(["flex items-center px-4 py-2 text-sm text-identity transition-colors duration-200 border rounded-md gap-x-2 dark:text-gray-200 dark:border-gray-200",["bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800","mb-2"]])},[t[2]||(t[2]=l("span",null," Ir al inicio ",-1)),(c(),V(Q(M(z).IconGo),{class:k(["w-5 h-5"])}))])]),l("div",null,[l("button",{onClick:t[1]||(t[1]=o=>dt()),class:k(["flex items-center px-4 py-2 text-sm text-identity capitalize transition-colors duration-200 border rounded-md gap-x-2 dark:text-gray-200 dark:border-gray-200",["bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800","mb-2"]])},[t[3]||(t[3]=l("span",null," Aplicar Cambios ",-1)),(c(),V(Q(M(z).IconSave),{class:k(["w-5 h-5"])}))])])]),l("div",Ct,[l("h6",Bt,h(Ke.value)+": "+h(te.value.length)+" días",1),l("div",Tt,[(c(),y(N,null,q(Re,o=>l("button",{key:o.value,onClick:n=>Ze(o.value),class:k(["py-2 px-4 rounded-md font-medium transition-all",[$.value===o.value?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-200 text-gray-800 hover:bg-gray-300"]])},h(o.label),11,St)),64))])]),l("div",Et,[kt(l("div",It,t[4]||(t[4]=[l("div",{class:"loader"},null,-1)]),512),[[bt,ae.value]]),l("div",At,[l("table",Mt,[l("thead",Nt,[l("tr",null,[(c(!0),y(N,null,q(X(),(o,n)=>(c(),y("th",{key:n,id:"head-column-"+n,class:k(["py-3.5 px-4 text-sm font-normal text-center rtl:text-right text-identity dark:text-gray-300",[{"sticky-column":n<r.stickyColumns}]]),style:Z(n<r.stickyColumns?{left:`${ye(n)}px`}:{})},h(o.label),15,$t))),128))])]),l("tbody",null,[(c(!0),y(N,null,q(r.tasks,(o,n)=>(c(),y("tr",{key:o.id},[(c(!0),y(N,null,q(X(),(i,w)=>(c(),y("td",{key:i.key,class:k(["relative text-center font-medium text-gray-800 border-y border-gray-300 py-2",[Ge(w,o),je(i.key,o.start,o.end),ve(i.key)?"cursor-pointer bg-green-200":""]]),onClick:m=>ve(i.key)?Le(i.key,n):null,style:Z(w<r.stickyColumns?{left:`${ye(w)}px`}:{})},[i.key==="start"||i.key==="end"?(c(),y(N,{key:0},[L(h(M(ee)(o[i.key])),1)],64)):i.key==="duration"?(c(),y(N,{key:1},[L(h(o[i.key])+" hrs ",1)],64)):i.key==="actividades_antecesoras_ids"?(c(),y("div",jt,[ie(s,{triggers:["click"],placement:"top"},{popper:G(()=>[o&&o[i.key]&&Object.keys(o[i.key]).length>0?(c(),y("div",Rt,[l("div",Vt,[l("span",Wt,[t[5]||(t[5]=L(" • ",-1)),l("strong",null,h(o[i.key]),1)])])])):(c(),y("div",Ht,t[6]||(t[6]=[l("div",{class:"inline-flex items-center px-3 py-1 rounded-full gap-x-2 bg-green-100 border border-green-600"},[l("span",{class:"text-sm font-semibold text-green-800"}," No hay actividades antecesoras. ")],-1)])))]),default:G(()=>[l("button",Lt,[(c(),V(Q(M(z).IconHistory),{class:k(["w-5 h-5","text-amber-800"])}))])]),_:2},1024)])):i.key==="go"?(c(),y("div",Pt,[l("button",{title:"Ir",onClick:m=>it(n),class:k(["m-1 p-1 rounded-md shadow-xl","bg-emerald-100 border border-emerald-600","custom-shadow"])},[(c(),V(Q(M(z).IconGo),{class:k(["w-5 h-5","text-emerald-800"])}))],8,Ft)])):i.key==="progress"?(c(),y("div",qt,[l("div",Gt,[l("div",{class:k(["absolute top-0 bottom-0 left-0 rounded-lg",ge(o[i.key])]),style:Z({width:`${o[i.key]}%`})},null,6),l("div",{class:k(["relative font-medium text-sm",he(o[i.key])])},h(o[i.key])+"% ",3)])])):($.value!=="year"?M(de)(i.key,o.start,o.end):Ue(o.start,o.end,i.key))?(c(),V(s,{key:5,id:"dropdown-task",triggers:["click"],placement:"top",onShow:m=>Me(o)},{popper:G(()=>[l("div",Yt,[(c(!0),y(N,null,q(u.value,(m,g)=>(c(),y("div",{key:g,class:"basis-full text-sm font-normal text-center rtl:text-right text-identity dark:text-gray-300"},[P(g).show?(c(),y("div",zt,[g==="start"||g==="end"?(c(),y("div",Xt,[L(" • "+h(P(g).label)+": ",1),l("div",Jt,[l("div",Qt,[l("button",{onClick:D=>Ne(g),class:"py-2 px-4 bg-identity-dark dark:bg-gray-900 text-white rounded-md font-medium transition-all hover:bg-identity-dark-gold"},t[7]||(t[7]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4M12 20l-8-8 8-8M4 12h16"})],-1)]),8,Kt)]),l("div",Zt,[ie(a,{modelValue:u.value[g],"onUpdate:modelValue":D=>u.value[g]=D,format:M(ee),"input-props":{readonly:!0},disabled:!0,"disabled-dates":D=>Oe(D),class:"flex justify-center"},null,8,["modelValue","onUpdate:modelValue","format","disabled-dates"])]),l("div",ea,[l("button",{onClick:D=>$e(g),class:"py-2 px-4 bg-identity-dark dark:bg-gray-900 text-white rounded-md font-medium transition-all hover:bg-identity-dark-gold"},t[8]||(t[8]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4l8 8-8 8M4 12h16"})],-1)]),8,ta)])])])):g==="responsables"?(c(),y("div",aa,[L(" • "+h(P(g).label)+": ("+h(m.length)+") ",1),(c(!0),y(N,null,q(m,(D,F)=>(c(),y("div",{key:F,class:"flex justify-center items-center"},[l("div",sa,[l("span",oa,h(D.nombre_completo)+" - "+h(D.tiempo_planeado)+" hrs ",1),l("span",null,[ie(s,{id:"dropdown-fechas-no-disponibles",triggers:["click"],placement:"top"},{popper:G(()=>t[9]||(t[9]=[L(" HERE ",-1)])),default:G(()=>[l("button",ra,[(c(),V(Q(M(z).IconCalendar),{class:k(["w-5 h-5","text-cyan-800"])}))])]),_:1})])])]))),128))])):g==="duration"?(c(),y("div",na," • "+h(P(g).label)+": "+h(M(Ce)(m)),1)):g==="progress"?(c(),y("div",la,[L(" • "+h(P(g).label)+": ",1),l("div",ia,[l("div",da,[l("div",{class:k(["absolute top-0 bottom-0 left-0 rounded-lg",ge(m)]),style:Z({width:`${m}%`})},null,6),l("div",{class:k(["relative font-medium text-sm",he(m)])},h(m)+"% ",3)])])])):(c(),y("span",ca," • "+h(P(g).label)+": "+h(m),1))])):le("",!0)]))),128)),l("div",ua,[l("button",{onClick:m=>tt(n),class:"flex justify-center py-2 px-4 mt-4 bg-identity dark:bg-orange-900 text-black border border-solid border-black rounded-md font-medium transition-all hover:bg-identity-dark-gold"},t[10]||(t[10]=[l("div",{class:"flex flex-row items-center"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4M12 20l-8-8 8-8M4 12h16"})]),l("span",null,"Swap")],-1)]),8,fa),l("button",{onClick:m=>st(n),class:"py-2 px-4 mt-4 bg-identity-dark dark:bg-gray-900 text-white rounded-md font-medium transition-all hover:bg-identity-dark-gold"}," Aplicar Cambios ",8,ya),l("button",{onClick:m=>at(n),class:"flex justify-center py-2 px-4 mt-4 bg-identity dark:bg-orange-900 text-black border-solid border-black rounded-md font-medium transition-all hover:bg-identity-dark-gold"},t[11]||(t[11]=[l("div",{class:"flex flex-row items-center"},[l("span",null,"Swap"),l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4l8 8-8 8M4 12h16"})])],-1)]),8,ga)])])]),default:G(()=>[l("div",Ut,[l("div",{class:k(["cursor-pointer absolute h-5 shadow-2xl",[Ye(o,i),ke(o,i)]]),style:{width:"100%"}},null,2)]),l("div",{class:k(["flex justify-center mt-6 text-xs text-center text-gray-800 shadow-lg border-color-identity-dark-gold",[ke(o,i),Xe(o,i),Qe(o,i.key)]])},h(M(_e)(i.key)),3)]),_:2},1032,["onShow"])):o[i.key]?(c(),y(N,{key:6},[L(h(o[i.key]),1)],64)):le("",!0)],14,Ot))),128))]))),128))])])])])])])],64)}}},Ba=ft(ha,[["__scopeId","data-v-06c98fd8"]]);export{Ba as default};
