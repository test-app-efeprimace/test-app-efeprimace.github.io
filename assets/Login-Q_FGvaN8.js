import{u as b,b as p,s as h,r as n,c as u,o,a as e,l as k,w as _,d as S,e as g,v as j,f as C,g as w,t as I,h as A,i as B,S as T}from"./index-Ficy73Kv.js";import{u as V}from"./featureFlags-_CcJ_rqO.js";import F from"./IconEye-D2qJg_QG.js";import M from"./IconEyeHide-BudxWY0I.js";const P={class:"h-full flex justify-between border-blue-500"},E={class:"w-full md:w-3/4 wrapper flex items-center justify-center border-red-500"},D={class:"w-full flex-2/3 wrapper flex items-center justify-center border-yellow-500"},N={class:"w-full max-w-md p-8 rounded-xl shadow-md border border-solid border-color-identity"},R={class:"relative"},U={class:"relative"},q={class:"relative"},H=["type"],L={class:"absolute top-0 right-0 mt-2 mr-4 cursor-pointer"},O={key:0,class:"flex items-center justify-center p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg",role:"alert"},$={class:"font-medium"},z={class:"grid justify-items-center"},G={key:0,type:"button",class:"mb-2 w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",disabled:""},J={key:1,type:"submit",class:"mb-2 w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"},Z={__name:"Login",setup(K){const f=b(),l=p(),x=V(),{isLoadingAuth:d}=h(p()),c=n(""),m=n("");n(!1);const i=n(""),s=n(!1),v=async()=>{d.value=!0;const r=await l.login({email:c.value,password:m.value});l.isAuthenticated&&(await l.fetchUser(),await x.loadFeatureFlags()),setTimeout(async()=>{r.success&&l.isAuthenticated?(T.fire({position:"center",icon:"success",title:r.message,showConfirmButton:!1,timer:2e3}),f.push({name:"home"})):r.success||(i.value=r.message,setTimeout(()=>{i.value=""},2e3)),d.value=!1},500)},y=()=>{f.push({name:"reset-password"})};return(r,t)=>(o(),u("main",null,[e("div",P,[t[11]||(t[11]=e("div",{class:"w-0 md:w-1/3 wrapper flex items-center justify-center border-orange-500"},null,-1)),e("div",E,[e("div",D,[e("div",N,[t[7]||(t[7]=e("img",{alt:"Vue logo",class:"w-full h-28",src:k},null,-1)),t[8]||(t[8]=e("br",null,null,-1)),t[9]||(t[9]=e("h2",{class:"text-2xl font-bold text-center text-identity"},"PIIAC",-1)),t[10]||(t[10]=e("h6",{class:"font-semi-bold text-center text-identity"},"Plataforma Inteligente Interactiva de Acción y Control",-1)),e("form",{onSubmit:_(v,["prevent"]),class:"mt-8 space-y-6"},[e("div",R,[t[4]||(t[4]=e("label",{for:"email",class:"block text-sm font-medium text-identity"},"Email",-1)),g(e("input",{id:"email",name:"email","onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),type:"email",required:"",autocomplete:"on",class:"text-gray-900 mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm"},null,512),[[j,c.value]])]),e("div",U,[t[5]||(t[5]=e("label",{for:"password",class:"block text-sm font-medium text-identity"},"Password",-1)),e("div",q,[g(e("input",{id:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=a=>m.value=a),type:s.value?"text":"password",required:"",autocomplete:"on",class:"text-gray-900 mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm pr-10"},null,8,H),[[C,m.value]]),e("span",L,[s.value?(o(),w(M,{key:1,class:"text-gray-900 w-6 h-6 cursor-pointer",onClick:t[3]||(t[3]=a=>s.value=!s.value)})):(o(),w(F,{key:0,class:"text-gray-900 w-6 h-6 cursor-pointer",onClick:t[2]||(t[2]=a=>s.value=!s.value)}))])])]),i.value?(o(),u("div",O,[e("span",$,I(i.value),1)])):S("",!0),e("div",z,[A(d)?(o(),u("button",G,t[6]||(t[6]=[e("svg",{class:"animate-spin h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1),B(" Iniciando Sesión... ",-1)]))):(o(),u("button",J," Iniciar Sesión "))])],32),e("div",{class:"flex justify-center text-sm"},[e("button",{onClick:y,class:"font-medium text-orange-600 hover:text-orange-500"},"¿Olvidaste tu contraseña? ")])])])])])]))}};export{Z as default};
