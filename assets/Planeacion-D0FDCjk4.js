import{r,q as mt,K as bt,b as yt,j as ht,L as wt,x as _t,m as x,N as oe,O as Ee,c as u,o as l,g as B,d as Q,a,n as X,e as w,Q as T,F as G,y as z,t as c,a3 as kt,R as Ce,A as ne,i as Re,p as f,z as U,h as m,$ as It,H as D,S as p,M as re,a4 as Se,a5 as Oe}from"./index-Ficy73Kv.js";import{u as Et,A as Ct}from"./business-BrTkWtTt.js";/* empty css                                              */import{c as Ae,_ as Rt,s as St,g as Ot,e as At}from"./BaseForm-Dcd7kL4r.js";import Bt from"./BaseTable-yHBH8VeL.js";/* empty css                                                              */import"./CurrencyInput-qrvO-2Ib.js";import"./Modal-Y96M_f6M.js";import"./IconX-CIzaZ8qm.js";import"./ViewDetails-BvOTNm1I.js";import"./featureFlags-_CcJ_rqO.js";const Tt={key:1},Dt={class:"bg-orange-100 border border-orange-600 my-4 rounded-lg"},Nt={class:"text-sm text-orange-500 ml-4"},Pt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},jt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},Lt={class:"transition-all duration-300 grid grid-cols-4 gap-4"},Vt={class:"text-lg text-center text-orange-800 dark:text-gray-300"},Gt={class:"text-lg text-center text-orange-800 dark:text-gray-300"},zt={class:"flex flex-col justify-center my-4"},Ut={class:"flex flex-row flex-wrap justify-center my-3 p-4 bg-identity-dark dark:border-gray-200 rounded-lg"},$t={class:"flex flex-row items-center"},Mt=["id","value","name"],Ht=["for"],qt={class:"font-semibold"},Ft={class:"flex flex-row items-center"},Jt=["id","value","name"],Wt=["for"],Kt={class:"font-semibold"},Yt={class:"basis-full text-center"},Qt=["disabled"],Xt={class:"flex flex-row my-4 justify-between"},Zt=["disabled"],ea={class:"flex flex-row items-center"},ta={class:"mr-2"},aa={key:1,class:"animate-spin h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},sa=["disabled"],oa={class:"flex flex-row items-center"},na={class:"mr-2"},ra={key:1,class:"animate-spin h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},la=["disabled"],ia={class:"flex flex-row items-center"},da={class:"mr-2"},ca={key:0},ua={key:1},ga=["onClick"],va={class:"text-2xl text-identity-dark dark:text-gray-300 flex items-center"},pa={class:"text-sm text-gray-500"},fa={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},xa={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},ma={class:"transition-all duration-300 px-4 py-2"},ba={class:"flex flex-row items-center px-3 py-1 rounded-lg my-4 bg-amber-100 border border-amber-600"},ya={class:"flex flex-col justify-center basis-1/3"},ha={class:"text-lg text-center text-amber-800 dark:text-gray-300"},wa={class:"flex flex-col justify-center basis-1/3"},_a={class:"text-lg text-center text-amber-800 dark:text-gray-300"},ka={class:"flex flex-row items-center px-3 py-1 rounded-lg my-4 bg-cyan-100 border border-cyan-600"},Ia={class:"flex flex-col justify-center basis-1/3"},Ea={class:"text-lg text-center text-cyan-800 dark:text-gray-300"},Ca={class:"flex flex-col justify-center basis-1/3"},Ra={title:"Responsables",class:f(["m-1 p-1 rounded-md shadow-xl","bg-cyan-100 border border-cyan-600","custom-shadow"])},Sa={class:"p-4 bg-identity-2 dark:bg-gray-800"},Oa={class:"my-1 p-1 border-color-identity-dark dark:border-gray-200"},Aa={class:"text-identity-dark font-semibold dark:text-gray-300"},Ba={class:"inline-flex items-center px-3 py-1 rounded-full gap-x-2 bg-red-100 border border-red-600"},Ta={class:"flex flex-col justify-center basis-1/3"},Da={class:"text-lg text-center text-cyan-800 dark:text-gray-300"},Na={class:"flex flex-row items-center px-3 py-1 rounded-lg my-4 bg-orange-100 border border-orange-600"},Pa={class:"flex flex-col justify-center basis-1/3"},ja={class:"text-lg text-center text-orange-800 dark:text-gray-300"},La={class:"flex flex-col justify-center basis-1/3"},Va={class:"text-lg text-center text-orange-800 dark:text-gray-300"},Ga={class:"flex flex-col justify-center basis-1/3"},za={class:"text-lg text-center text-orange-800 dark:text-gray-300"},Ua={class:"flex flex-row items-center px-3 py-1 rounded-lg my-4 bg-teal-100 border border-teal-600"},$a={class:"flex flex-col justify-center basis-1/3"},Ma={class:"text-lg text-center text-teal-800 dark:text-gray-300"},Ha={class:"flex flex-col justify-center basis-1/3"},qa={class:"text-lg text-center text-teal-800 dark:text-gray-300"},Fa={class:"flex flex-col justify-center basis-1/3"},Ja={class:"bg-white rounded-xl shadow-sm overflow-hidden p-1"},Wa={class:"relative h-6 flex items-center justify-center"},xs={__name:"Planeacion",setup(Ka){const le=r(!1);function ie(t,e=0){return new Promise(n=>{setTimeout(()=>{le.value=t,n()},e)})}const Be=()=>{Oe("Planificación Generada con Éxito",{position:Oe.POSITION.TOP_CENTER,toastClassName:"custom-toast"})};r(null),r(null),r(null);const Te=r(null),De=r(["IconGantt","IconPeople","IconPlanning","IconCalendar","IconLoading"]),{iconsForm:N,loadFormIcons:Ne}=mt(),{formatPrettyDate:$,formatStoreDate:Ya,parseStoreDate:Qa,isDateBetweenDates:Xa,compareRangeDates:Za,addDaysToDate:es,compareDatesIsSame:ts}=bt();let de;const Z=yt(),{backendUrlFC:ee}=ht(),{formatHours:ce,parseStringToIntHours:ue,getResponsables:C,getOrdenTrabajo:P,getOrdenEtapas:Pe,getOrdenEtapaTasks:as,getOrdenEtapasGeneralTasks:ss,formatStringHours:ge,formatIntHours:os,getLaboralHoursPerDay:je}=Et();wt(async()=>{de(),Ae(),h.value&&clearInterval(h.value)}),_t(async()=>{Fe.value=await C("all"),me.value=await C("ingenieria"),be.value=await C("dibujo"),ye.value=await C("cantidades"),he.value=await C("coordinador-ingenieria"),we.value=await C("coordinador-dibujo"),await Ne(De.value),Te.value=await je()});const Le=()=>{Se.push({name:"planeacion-aplicada",params:{orden_id:d.value.id}})},R=r([]),ve=r(!1),M=r(!0),j=r({}),Ve=x(()=>{let t=["id","show_data","estado"];return Object.keys(j.value).filter(e=>!t.includes(e))}),Ge=t=>t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),pe={proyecto:["codigo","nombre_proyecto"],tipoEstructura:["codigo","nombre"],tipoCimentacion:["codigo","nombre"]},ze=(t,e)=>{if(t==="horas_ingenieria_estimadas"||t==="horas_dibujo_estimadas"){let n={horas_ingenieria_estimadas:"horas_estimadas_ingenieria",horas_dibujo_estimadas:"horas_estimadas_dibujo"},o=0;return v.value.forEach(s=>{o+=ue(s[n[t]])}),ce(o)}if(t==="horas_totales_estimadas"){let n=0;return v.value.forEach(o=>{n+=ue(o.horas_estimadas_etapa)}),ce(n)}return["velocidad_ingenieria","velocidad_dibujo"].includes(t)?j.value.tipoEstructura[t]:e===null?"Sin información":pe[t]?pe[t].map(n=>e[n]).join(" - "):e};de=oe(()=>At.data,async t=>{if(t&&t.actionSelected==="show_planning_table"){ke(),xe(!1),await ie(!0),y.value=t.ordenId,v.value=await Pe(y.value),console.log("Orden Etapas: ",v.value),j.value=t.infoEstructura,console.log("Info Estructura: ",j.value);const e=await P(y.value);d.value=e.ordenTrabajo,_.value=d.value.responsablesOnOrderWithOwnNotAvailableDates,Ue(v.value),await ie(!1,750),xe(!0),Ae()}},{immediate:!1});const Ue=t=>{R.value=[],R.value=new Array(t.length).fill(!0)},$e=t=>{R.value[t]=!R.value[t]},Me=()=>{M.value=!M.value},fe=r(!1),xe=t=>{fe.value=t},y=r(null),d=r(null),v=r(null),H=r(null),He=["TODO","INGENIERIA","DIBUJO","CANTIDADES","REVISION (DE)","REVISION (DI)"],qe={TODO:{key:"all",value:!0},INGENIERIA:{key:"area_responsable",value:"INGENIERIA"},DIBUJO:{key:"area_responsable",value:"DIBUJO"},CANTIDADES:{key:"area_responsable",value:"CANTIDADES"},"REVISION (DE)":{key:"titulo_actividad",value:"REVISION (DE)"},"REVISION (DI)":{key:"titulo_actividad",value:"REVISION (DI)"}},_=r([]),Fe=r([]),me=r([]),be=r([]),ye=r([]),he=r([]),we=r([]),S=r([]),Je=x(()=>{const t=new Set;for(const e in b.value){const n=b.value[e];n.length>0&&(n.some(o=>o.area_responsable==="INGENIERIA"&&!L("REVISION",o.titulo_actividad))&&me.value.forEach(o=>t.add(o)),n.some(o=>o.area_responsable==="DIBUJO"&&!L("REVISION",o.titulo_actividad))&&be.value.forEach(o=>t.add(o)),n.some(o=>o.area_responsable==="CANTIDADES"&&!L("REVISION",o.titulo_actividad))&&ye.value.forEach(o=>t.add(o)),n.some(o=>L("REVISION",o.titulo_actividad)&&o.area_responsable==="INGENIERIA")&&he.value.forEach(o=>t.add(o)),n.some(o=>L("REVISION",o.titulo_actividad)&&o.area_responsable==="DIBUJO")&&we.value.forEach(o=>t.add(o)))}return Array.from(t)}),L=(t,e)=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase().includes(t);oe(()=>H.value,t=>{t&&(se.value=qe[t])});const te=r({}),We=(t,e)=>{t&&(te.value["actividades-"+e.id]=t)},ae=r({}),Ke=()=>{for(const t in te.value){const n=te.value[t].sendRows();ae.value[t]=n}},se=r({}),b=r({}),Ye=(t,e)=>{b.value[_e(t)]=e},q=x(()=>{let t=0;if(!b.value)return t;for(const e in b.value)t+=b.value[e].length;return t}),Qe=t=>{var e;return b.value&&((e=b.value[_e(t)])==null?void 0:e.length)||0},_e=t=>v.value[t].id,F=r("Asignar"),Xe=x(()=>F.value==="Asignar"?"Asignar Responsables":"Desasignar Responsables"),Ze=["Asignar","Desasignar"],et={asignar:"asignarActividadesOrdenEtapaMasiva",desasignar:"desasignarActividadesOrdenEtapaMasiva"},tt=async()=>{try{const t=new URL(`api/massive/edit/form/${et[F.value.toLowerCase()]}`,ee),e={ordenId:y.value,ordenEtapas:b.value,responsables:S.value};console.log("Data a enviar: ",e);const n=await fetch(t,{method:"POST",headers:{Authorization:`Bearer ${Z.token}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(n.status===401)throw new D("Unauthorized: Porfavor vuelve a Iniciar Sesión",n.status);if(!n.ok)throw new D("Error al asignar responsables.",n.status);const o=await n.json();p.fire({title:o.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"}),ke(),o.newRows&&o.newOrdenEtapas&&(at(o.newRows),st(o.newOrdenEtapas))}catch(t){re(t)}},at=async t=>{St({actionSelected:"update_rows_orden_etapas",newRows:t}),await Ot()},st=async t=>{t.forEach((e,n)=>{const o=v.value.findIndex(s=>s.id===e.id);o>=0&&(v.value[o]=e)})},ke=()=>{b.value={},S.value=[],H.value=null,se.value={}},k=r(!1),J=r(!1),W=x(()=>{var t;return(t=d.value)==null?void 0:t.suggested_planning.tasks}),ot=x(()=>{var t;return((t=d.value)==null?void 0:t.suggested_planning.estado)!=="GENERATED"&&!W.value}),V=x(()=>{var t;return((t=d.value)==null?void 0:t.suggested_planning.estado)==="REQUESTED"&&!W.value}),K=x(()=>{var t;return((t=d.value)==null?void 0:t.suggested_planning.estado)==="GENERATED"&&W.value}),Y=x(()=>{var t;return((t=d.value)==null?void 0:t.suggested_planning.estado)==="APPLIED"&&W.value}),nt=r(1e4);let h=r(null);oe(V,t=>{t?(console.log("Requesting Orden Selected..."),h.value=setInterval(async()=>{const e=await P(y.value);d.value=e.ordenTrabajo,_.value=d.value.responsablesOnOrder,console.log("Orden Seleccionada... ",d.value),console.log("Responsables Orden... ",_.value)},nt.value)):(console.log("No se ha solicitado generación de planeación automática"),h.value&&(Be(),clearInterval(h.value),h.value=null))},{immediate:!0});const I=x(()=>h.value&&V.value?{text:"Generando...",class:"bg-cyan-600 hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconLoading",loading:!0,disabled:!0,show:!0}:K.value?{text:k.value?"Cargando...":"Ver Planeación Sugerida",class:"bg-emerald-500 hover:bg-emerald-700 dark:bg-emerald-600 dark:hover:bg-emerald-800",icon:k.value?"IconLoading":"IconPlanning",loading:k.value,disabled:k.value,show:!0}:Y.value?{text:"Planeación Aplicada",class:"bg-emerald-500 hover:bg-emerald-700 dark:bg-emerald-600 dark:hover:bg-emerald-800",icon:"IconPlanning",loading:!1,disabled:!0,show:!1}:k.value?{text:"Solicitando...",class:"bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconLoading",loading:!0,disabled:!0,show:!0}:{text:"Solicitar Planeación Automática",class:"bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconPlanning",loading:!1,disabled:!1,show:!0}),E=r(!1),O=x(()=>h.value&&V.value?{text:"Generando...",class:"bg-cyan-600 hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconLoading",loading:!0,disabled:!0}:K.value?{text:E.value?"Cargando...":"Regenerar Planeación Sugerida",class:"bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:E.value?"IconLoading":"IconPlanning",loading:E.value,disabled:E.value}:E.value?{text:"Solicitando...",class:"bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconLoading",loading:!0,disabled:!0}:{text:"Regenerar Planeación Automática",class:"bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconPlanning",loading:!1,disabled:!!K.value}),rt=()=>{O.value.disabled||(console.log("Regenerar Planeación Automática"),lt())},lt=async()=>{ut();const t=await P(y.value);if(d.value=t.ordenTrabajo,_.value=d.value.responsablesOnOrderWithOwnNotAvailableDates,console.log("Orden Seleccionada: ",d.value),console.log("Responsables Orden: ",_.value),V.value){p.fire({title:"Ya se ha solicitado una planeación automática",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"}),A();return}if(ot.value){p.fire({title:"No se ha generado una planeación automática para este proyecto.",icon:"warning",confirmButtonText:"Aceptar",confirmButtonColor:"#2563EB"}),A();return}p.fire({title:"¿Estás seguro de re-generar una planeación automática?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, generar",cancelButtonText:"Cancelar",confirmButtonColor:"#EC7522",cancelButtonColor:"#6B7280"}).then(async e=>{if(e.isConfirmed)try{const n=new URL("api/re-generate-automatic-planning",ee),o={orden_id:d.value.id,ordenEtapas:v.value},s=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${Z.token}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)});if(s.status===401)throw A(),new D("Unauthorized: Porfavor vuelve a Iniciar Sesión",s.status);if(!s.ok)throw A(),new D("Error al generar la planeación automática.",s.status);const i=await P(y.value);d.value=i.ordenTrabajo,_.value=d.value.responsablesOnOrderWithOwnNotAvailableDates;const g=await s.json();p.fire({title:g.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"}),A()}catch(n){re(n)}else A()})},it=()=>{Se.push({name:"planeacion-sugerida",params:{orden_id:d.value.id}})},dt=async()=>{if(!I.value.disabled){if(gt(),K.value){const t=JSON.parse(d.value.suggested_planning.tasks);console.log("Original PLANNING TASKS RESPONSE Tasks: ",t),it(),Ie();return}await ct(),Ie()}},ct=async()=>{if(vt()){p.fire({title:"Existen etapas sin responsables asignados",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"});return}if(pt()){p.fire({title:"Existen actividades sin responsables asignados",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"});return}if(V.value){p.fire({title:"Ya se ha solicitado una planeación automática",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"});return}return p.fire({title:"¿Estás seguro de generar una planeación automática?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, generar",cancelButtonText:"Cancelar",confirmButtonColor:"#EC7522",cancelButtonColor:"#6B7280"}).then(async t=>{if(t.isConfirmed){let e;await p.fire({title:"¿Deseas asignar una fecha tentativa de inicio?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, asignar",cancelButtonText:"No, continuar",confirmButtonColor:"#EC7522",cancelButtonColor:"#6B7280"}).then(async n=>{if(n.isConfirmed){const{value:o}=await p.fire({title:"Selecciona la fecha",html:'<input type="date" id="fechaInput" class="swal2-input" required>',focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar",confirmButtonColor:"#EC7522",cancelButtonColor:"#6B7280",preConfirm:()=>document.getElementById("fechaInput").value,inputValidator:s=>{if(!s)return"¡Debes seleccionar una fecha!"}});if(o){const[s,i,g]=o.split("-");e={year:parseInt(s,10),month:parseInt(i,10),day:parseInt(g,10)}}}}),e?console.log("Fecha Tentativa: ",e):console.log("No se seleccionó fecha tentativa");try{const n=new URL("api/generate-automatic-planning",ee),o={orden_id:d.value.id,ordenEtapas:v.value,fecha_tentativa_inicio:e},s=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${Z.token}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)});if(s.status===401)throw new D("Unauthorized: Porfavor vuelve a Iniciar Sesión",s.status);if(!s.ok)throw new D("Error al generar la planeación automática.",s.status);const i=await P(y.value);d.value=i.ordenTrabajo,_.value=d.value.responsablesOnOrderWithOwnNotAvailableDates;const g=await s.json();p.fire({title:g.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"})}catch(n){re(n)}}})},ut=()=>{E.value=!0},A=()=>{E.value=!1},gt=()=>{k.value=!0},Ie=()=>{k.value=!1},vt=()=>{for(const t of v.value)if(t.responsables.length===0)return!0;return!1},pt=()=>{Ke();for(const t in ae.value)if(ae.value[t].some(n=>n.responsables.length===0))return!0;return!1},ft=t=>({"bg-green-200":t<105,"bg-orange-200":t>105&&t<120,"bg-red-200":t>120}),xt=t=>({"text-green-800":t<105,"text-orange-800":t>105&&t<120,"text-red-800":t>120});return r([]),(t,e)=>{const n=Ee("multiselect"),o=Ee("VDropdown");return l(),u("main",null,[le.value?(l(),B(Ct,{key:0})):Q("",!0),e[28]||(e[28]=a("div",{class:"wrapper flex items-center justify-center mb-10"},[a("h1",{class:"text-2xl text-identity-dark dark:text-gray-300"},"Planeación")],-1)),X(Rt,{"type-form":"planeacion","icons-view":["IconPlanning"],"action-selected":"planning"}),fe.value?(l(),u("div",Tt,[a("div",Dt,[a("div",{class:"flex justify-center items-center p-4 text-center cursor-pointer rounded-lg border-b border-orange-600",style:{"border-bottom-width":"0.5px"},onClick:Me},[e[6]||(e[6]=a("h2",{class:"text-2xl text-orange-800 dark:text-gray-300 flex items-center"}," Información Estructura ",-1)),a("span",Nt,[M.value?(l(),u("svg",Pt,e[4]||(e[4]=[a("path",{"fill-rule":"evenodd",d:"M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(l(),u("svg",jt,e[5]||(e[5]=[a("path",{"fill-rule":"evenodd",d:"M14.707 10.707a1 1 0 01-1.414 0L10 7.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)])))])]),w(a("div",Lt,[(l(!0),u(G,null,z(Ve.value,(s,i)=>(l(),u("div",{key:i,class:"border-r border-b border-orange-600 p-2",style:{"border-bottom-width":"0.5px"}},[a("div",null,[a("h2",Vt,c(Ge(s))+": ",1),a("h2",Gt,c(ze(s,j.value[s])),1)])]))),128))],512),[[T,!M.value]])]),a("div",zt,[a("div",Ut,[(l(),u(G,null,z(He,(s,i)=>a("div",{key:i,class:"flex flex-col items-center my-2 p-2 border rounded-lg"},[a("div",$t,[w(a("input",{type:"radio",id:`option-radio-${i}-${s}`,"onUpdate:modelValue":e[0]||(e[0]=g=>H.value=g),value:s,name:`options-${i}-responsables`,class:"cursor-pointer w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-orange-500"},null,8,Mt),[[Ce,H.value]]),a("label",{for:`option-radio-${i}-${s}`,class:"cursor-pointer ml-2 text-sm font-medium text-gray-300 dark:text-gray-300"},[a("span",qt,c(s),1)],8,Ht)])])),64)),e[8]||(e[8]=kt('<div class="flex justify-center basis-full text-center mt-4"><div class="basis-full"><label for="responsables" class="block text-sm text-identity dark:text-gray-300 max-w-full"><div class="flex justify-center flex-row max-w-full"><span class="relative flex h-2 w-2 mt-1.5 max-w-full"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span></span><span class="ml-2 max-w-full truncate"> Responsables :</span></div></label></div></div>',1)),X(n,{modelValue:S.value,"onUpdate:modelValue":e[1]||(e[1]=s=>S.value=s),"tag-placeholder":"Nuevo tag",placeholder:"Selecciona una o más opciones","selected-label":"Seleccionado","select-label":"Seleccionar","deselect-label":"Deseleccionar","track-by":"id",options:Je.value,multiple:!0,disabled:q.value===0,label:"show_data",class:"mb-4"},{noResult:ne(()=>e[7]||(e[7]=[Re(" No hay resultados ",-1)])),_:1},8,["modelValue","options","disabled"]),(l(),u(G,null,z(Ze,(s,i)=>a("div",{key:i,class:"flex flex-col items-center my-2 p-2 border rounded-lg"},[a("div",Ft,[w(a("input",{type:"radio",id:`option-radio-${i}-${s}`,"onUpdate:modelValue":e[2]||(e[2]=g=>F.value=g),value:s,name:`options-${i}-actions`,class:"cursor-pointer w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-orange-500"},null,8,Jt),[[Ce,F.value]]),a("label",{for:`option-radio-${i}-${s}`,class:"cursor-pointer ml-2 text-sm font-medium text-gray-300 dark:text-gray-300"},[a("span",Kt,c(s),1)],8,Wt)])])),64)),a("div",Yt,[a("button",{onClick:tt,class:f(["mt-4 px-4 py-2 text-sm text-identity-dark capitalize transition-colors duration-200 border rounded-md gap-x-2 dark:text-gray-200 dark:border-gray-200",[q.value===0||S.value.length===0?"bg-gray-400":"bg-identity hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-800"]]),disabled:q.value===0||S.value.length===0},[a("span",null,c(Xe.value),1)],10,Qt)])])]),a("div",Xt,[a("div",{class:f(["inline-flex items-center px-3 py-1 rounded-full gap-x-2",["bg-cyan-100 border border-cyan-600"]])},[a("h2",{class:f(["text-sm text-center font-normal",["text-cyan-800"]])},c(q.value)+" Actividades seleccionadas. ",1)]),Y.value?(l(),u("button",{key:0,onClick:rt,class:f(["px-4 py-2 text-sm text-identity capitalize transition-colors duration-200 border rounded-md dark:text-gray-200 dark:border-gray-200",[O.value.class]]),disabled:O.value.disabled},[a("div",ea,[a("div",ta,[O.value.loading?(l(),u("svg",aa,e[9]||(e[9]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"},null,-1)]))):(l(),B(U(m(N)[O.value.icon]),{key:0,class:"text-identity dark:text-gray-300 w-5 h-5"}))]),a("span",null,c(O.value.text),1)])],10,Zt)):Q("",!0),I.value.show?(l(),u("button",{key:1,onClick:dt,class:f(["px-4 py-2 text-sm text-identity capitalize transition-colors duration-200 border rounded-md dark:text-gray-200 dark:border-gray-200",[I.value.class]]),disabled:I.value.disabled},[a("div",oa,[a("div",na,[I.value.loading?(l(),u("svg",ra,e[10]||(e[10]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"},null,-1)]))):(l(),B(U(m(N)[I.value.icon]),{key:0,class:"text-identity dark:text-gray-300 w-5 h-5"}))]),a("span",null,c(I.value.text),1)])],10,sa)):Q("",!0),a("button",{onClick:e[3]||(e[3]=s=>J.value?null:Le()),class:f(["px-4 py-2 text-sm text-identity capitalize transition-colors duration-200 border-color-identity-dark rounded-md dark:text-gray-200 dark:border-gray-200",[Y.value&&!ve.value?"bg-emerald-500 hover:bg-emerald-400 dark:bg-emerald-600 dark:hover:bg-emerald-400":"bg-gray-400"]]),disabled:!Y.value||J.value},[a("div",ia,[a("div",da,[J.value?(l(),B(U(m(N).IconLoading),{key:1})):(l(),B(U(m(N).IconGantt),{key:0,class:"text-identity dark:text-gray-200 w-5 h-5"}))]),e[11]||(e[11]=a("span",null,null,-1)),J.value?(l(),u("span",ua," Cargando... ")):(l(),u("span",ca,c(ve.value?"Ocultar Gantt Planeación":"Ver Gantt Planeación"),1))])],10,la)]),(l(!0),u(G,null,z(v.value,(s,i)=>w((l(),u("div",{key:i,class:"bg-gray-300 mb-4 rounded-lg border border-solid border-gray-600"},[a("div",{class:"flex justify-between items-center py-4 px-10 text-center cursor-pointer rounded-lg border-b border-gray-600",style:{"border-bottom-width":"0.5px"},onClick:g=>$e(i)},[a("h2",va,[Re(c(s.show_data)+" ",1),a("div",{class:f(["inline-flex items-center px-3 py-1 rounded-full ml-4",["bg-cyan-100 border border-cyan-600"]])},[a("h2",{class:f(["text-sm text-center font-normal",["text-cyan-800"]])},c(Qe(i))+" Actividades seleccionadas. ",1)])]),a("span",pa,[R.value[i]?(l(),u("svg",fa,e[12]||(e[12]=[a("path",{"fill-rule":"evenodd",d:"M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(l(),u("svg",xa,e[13]||(e[13]=[a("path",{"fill-rule":"evenodd",d:"M14.707 10.707a1 1 0 01-1.414 0L10 7.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)])))])],8,ga),w(a("div",ma,[a("div",ba,[a("div",ya,[e[14]||(e[14]=a("h2",{class:"text-lg text-center text-amber-800 dark:text-gray-300"}," Fecha Inicio Planeada Etapa: ",-1)),a("h2",ha,c(m($)(s.fecha_inicio_planeada)),1)]),e[16]||(e[16]=a("div",{class:"flex flex-col justify-center basis-1/3"},null,-1)),a("div",wa,[e[15]||(e[15]=a("h2",{class:"text-lg text-center text-amber-800 dark:text-gray-300"}," Fecha Entrega Planeada Etapa: ",-1)),a("h2",_a,c(m($)(s.fecha_entrega_planeada)),1)])]),a("div",ka,[a("div",Ia,[e[17]||(e[17]=a("h2",{class:"text-lg text-center text-cyan-800 dark:text-gray-300"}," Fecha Inicio Real Etapa: ",-1)),a("h2",Ea,c(m($)(s.fecha_inicio_real)),1)]),a("div",Ca,[e[19]||(e[19]=a("h2",{class:"text-lg text-center text-cyan-800 dark:text-gray-300"}," Responsables Etapa: ",-1)),X(o,{triggers:["hover"],placement:"top",class:"flex justify-center"},{popper:ne(()=>[a("div",Sa,[(l(!0),u(G,null,z(s.responsables,g=>w((l(),u("div",{key:g.id,class:"basis-full text-sm font-normal text-center rtl:text-right text-identity dark:text-gray-300"},[a("div",Oa,[a("span",Aa," • "+c(g.nombre_completo),1)])])),[[T,s.responsables.length>0]])),128)),w(a("div",Ba,e[18]||(e[18]=[a("h2",{class:"text-sm font-semibold text-red-800"}," Sin responsables. ",-1)]),512),[[T,s.responsables.length===0]])])]),default:ne(()=>[a("button",Ra,[(l(),B(U(m(N).IconPeople),{class:f(["w-5 h-5","text-cyan-800"])}))])]),_:2},1024)]),a("div",Ta,[e[20]||(e[20]=a("h2",{class:"text-lg text-center text-cyan-800 dark:text-gray-300"}," Fecha Entrega Real Etapa: ",-1)),a("h2",Da,c(m($)(s.fecha_entrega_real)),1)])]),a("div",Na,[a("div",Pa,[e[21]||(e[21]=a("h2",{class:"text-lg text-center text-orange-800 dark:text-gray-300"}," Horas Estimadas Etapa: ",-1)),a("h2",ja,c(s.horas_estimadas_etapa),1)]),a("div",La,[e[22]||(e[22]=a("h2",{class:"text-lg text-center text-orange-800 dark:text-gray-300"}," Horas Estimadas Ingeniería: ",-1)),a("h2",Va,c(s.horas_estimadas_ingenieria),1)]),a("div",Ga,[e[23]||(e[23]=a("h2",{class:"text-lg text-center text-orange-800 dark:text-gray-300"}," Horas Estimadas Dibujo: ",-1)),a("h2",za,c(s.horas_estimadas_dibujo),1)])]),a("div",Ua,[a("div",$a,[e[24]||(e[24]=a("h2",{class:"text-lg text-center text-teal-800 dark:text-gray-300"}," Tiempo Planeado Etapa: ",-1)),a("h2",Ma,c(m(ge)(s.tiempo_planeado)),1)]),a("div",Ha,[e[25]||(e[25]=a("h2",{class:"text-lg text-center text-teal-800 dark:text-gray-300"}," Tiempo Real Etapa: ",-1)),a("h2",qa,c(m(ge)(s.tiempo_real)),1)]),a("div",Fa,[e[26]||(e[26]=a("h2",{class:"text-lg text-center text-teal-800 dark:text-gray-300"}," Progreso Etapa: ",-1)),a("div",Ja,[a("div",Wa,[a("div",{class:f(["absolute top-0 bottom-0 left-0 rounded-lg",ft(s.progreso)]),style:It({width:`${s.progreso}%`})},null,6),a("div",{class:f(["relative font-medium text-sm",xt(s.progreso)])},c(s.progreso)+"% ",3)])])])]),X(Bt,{ref_for:!0,ref:g=>We(g,s),table:"actividadesOrdenEtapa","icons-view":[],"row-selected":s,"show-search":!1,onSelectedRows:g=>Ye(i,g),"select-rows-by":se.value},null,8,["row-selected","onSelectedRows","select-rows-by"])],512),[[T,!R.value[i]]])])),[[T,v.value.length>0]])),128)),w(a("div",null,e[27]||(e[27]=[a("h2",{class:"my-4 text-2xl text-identity-dark dark:text-gray-300 text-center"}," No hay actividades para mostrar ",-1)]),512),[[T,v.value.length===0]])])):Q("",!0)])}}};export{xs as default};
